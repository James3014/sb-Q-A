# TODO

## é‡æ§‹æ¸…å–®ï¼ˆClean Code + Linus åŸå‰‡ï¼‰

- [x] 1. çµ±ä¸€å¾Œå°é é¢ä½¿ç”¨ AdminLayoutï¼ˆæ¶ˆé™¤é‡è¤‡é©—è­‰é‚è¼¯ï¼‰
- [x] 2. ç§»é™¤ admin/page.tsx é‡è¤‡çš„ loading/æ¬Šé™æª¢æŸ¥
- [x] 3. å¾Œå°å¯†ç¢¼çµ±ä¸€ç”¨ç’°å¢ƒè®Šæ•¸
- [x] 4. åˆªé™¤ç©ºçš„ web/src/data è³‡æ–™å¤¾
- [x] 5. admin/page.tsx æ‹†åˆ†å­çµ„ä»¶ï¼ˆStatCardã€TopLessonsã€TopKeywordsã€RecentFeedbackï¼‰
- [x] 6. æ‹†åˆ† ImprovementDashboard çµ„ä»¶ï¼ˆpractice/page.tsx 369â†’100 è¡Œï¼‰
- [x] 7. SKILL_RECOMMENDATIONS ç§»åˆ° constants.ts
- [x] 8. æ‹†åˆ† LessonHeatmap çµ„ä»¶ï¼ˆadmin/lessons/page.tsx 325â†’150 è¡Œï¼‰
- [x] 9. å»ºç«‹ formatDate() å…±ç”¨å‡½æ•¸
- [x] 10. è¨‚é–±æ–¹æ¡ˆå¸¸æ•¸ SUBSCRIPTION_PLANS ç§»åˆ° constants.ts
- [x] 11. getSubscriptionStatus() ç§»åˆ° lib/subscription.ts
- [x] 12. FunnelBar / ProgressBar / StatCard ç§»åˆ° ui.tsx
- [x] 13. admin/users æ‹†åˆ† ActivationPanel çµ„ä»¶
- [x] 14. FEEDBACK_TYPES ç§»åˆ° constants.ts
- [x] 15. é©—è­‰ build âœ…

## ç¬¬äº”è¼ªé‡æ§‹ï¼ˆ2025-11-27ï¼‰

- [x] 16. admin/page.tsx ç§»é™¤é‡è¤‡ StatCardï¼Œä½¿ç”¨ ui.tsx
- [x] 17. FEEDBACK_TYPE_LABELS ç§»åˆ° constants.ts
- [x] 18. é¦–é  slopeFilter ä½¿ç”¨ SLOPE_NAMES
- [x] 19. admin/page.tsx RecentFeedback ä½¿ç”¨ formatDate
- [x] 20. admin/feedback ä½¿ç”¨ formatDate + FEEDBACK_TYPE_LABELS
- [x] 21. é©—è­‰ build âœ…

---

## èª²ç¨‹è©³æƒ…é å¢å¼·ç‰ˆï¼ˆ2025-11-27ï¼‰

### Schema è®Šæ›´
- [x] 22. practice_logs æ–°å¢ rating1/rating2/rating3 æ¬„ä½ï¼ˆmigration_rating_v2.sqlï¼‰

### çµ„ä»¶æ‹†åˆ†
- [x] 23. LessonHeaderï¼ˆè¿”å›ã€æ”¶è—ã€åˆ†äº«ï¼‰
- [x] 24. LessonWhatï¼ˆå•é¡Œå€å¡Šé‡æ–°æ’ç‰ˆï¼‰
- [x] 25. LessonWhyï¼ˆç›®æ¨™å€å¡Šé‡æ–°æ’ç‰ˆï¼‰
- [x] 26. LessonStepsï¼ˆHow æ­¥é©Ÿå¡ç‰‡åŒ– + åœ–ç‰‡æ§½ä½ï¼‰
- [x] 27. LessonSignalsï¼ˆåšå°/åšéŒ¯è¨Šè™Ÿï¼‰
- [x] 28. LessonPracticeCTAï¼ˆç·´ç¿’æŒ‰éˆ• + ä¸‰é …è©•åˆ†å½ˆçª—ï¼‰
- [x] 29. LessonPracticeHistoryï¼ˆèª²ç¨‹ç´šåˆ¥ç·´ç¿’ç´€éŒ„ï¼‰
- [x] 30. LessonRecommendationsï¼ˆå¼±é …æ¨è–¦èª²ç¨‹ï¼‰
- [x] 31. LessonUnlockPROï¼ˆæŸ”æ€§ä»˜è²»å¼•å°ï¼‰

### æ•´åˆ
- [x] 32. é‡å¯« LessonDetail.tsx ä½¿ç”¨æ–°çµ„ä»¶
- [x] 33. æ›´æ–° practice.ts API æ”¯æ´ä¸‰é …è©•åˆ†
- [x] 34. é©—è­‰ build âœ…

---

## èª²ç¨‹è©³æƒ…é å¢å¼· Phase 2ï¼ˆ2025-11-27ï¼‰

### Phase 1ï¼šå®Œæˆå¾Œæ­£å‘å›é¥‹
- [x] 35. ç·´ç¿’å®Œæˆå‹•ç•«ï¼ˆâœ“ æ‰“å‹¾å‹•ç•«ï¼‰
- [x] 36. é¡¯ç¤ºã€Œ+1 æ¬¡ç·´ç¿’ã€+ ç´¯è¨ˆæ¬¡æ•¸
- [x] 37. é¡¯ç¤ºæœ€è¿‘æ”¹å–„åº¦è®ŠåŒ–

### Phase 2ï¼šæ¬¡åºå¼ç·´ç¿’å»ºè­°
- [x] 38. getRelatedLessons å‡½æ•¸ï¼ˆåŸºæ–¼æŠ€èƒ½å’Œç¨‹åº¦ï¼‰
- [x] 39. LessonSequence çµ„ä»¶ï¼ˆå…ˆçœ‹ â†’ ä¸‹ä¸€æ­¥ â†’ ç›¸ä¼¼ï¼‰
- [x] 40. é¡¯ç¤ºåœ¨èª²ç¨‹åº•éƒ¨

### Phase 3ï¼šAI ç¤ºæ„åœ–è¦åŠƒ
- [ ] 41. å¾ heatmap é¸å‡º TOP 10 ç†±é–€èª²ç¨‹
- [ ] 42. å»ºç«‹ Prompt æ¨™æº–åŒ–æ¨¡æ¿ï¼ˆç°¡ç­†ç•«é¢¨æ ¼ï¼‰
- [ ] 43. å®šç¾©åœ–ç‰‡é¢¨æ ¼æŒ‡å—

---

## UX å„ªåŒ–ï¼ˆ2025-11-28ï¼‰

> åŸºæ–¼ UX å¯©æŸ¥å ±å‘Šï¼ŒæŒ‰ Linus åŸå‰‡æ’åºï¼šä½æˆæœ¬é«˜å›å ±å„ªå…ˆ

### ğŸ”´ Phase 1ï¼šç«‹å³åšï¼ˆæœ¬é€±ï¼Œ~7hrï¼‰âœ… å·²å®Œæˆ

| # | é …ç›® | å·¥æ™‚ | æª”æ¡ˆ | ç‹€æ…‹ |
|---|------|------|------|------|
| - [x] 74. å­—ç´šå„ªåŒ– 18px + è¡Œé«˜ 1.8 | 1hr | LessonContent.tsx | âœ… |
| - [x] 75. éŒ¯èª¤é åŠ è¿”å›æŒ‰éˆ• | 2hr | lesson/[id]/page.tsx | âœ… |
| - [x] 76. éœ‡å‹•å›é¥‹ï¼ˆæŒ‰éˆ•é»æ“Šï¼‰ | 1hr | ui.tsx:Button | âœ… |
| - [x] 77. Skeleton è¼‰å…¥ç‹€æ…‹ | 3hr | SkeletonLesson.tsx | âœ… |

### ğŸŸ¡ Phase 2ï¼šæœ¬é€±å¾ŒåŠï¼ˆ~6hrï¼‰âœ… å·²å®Œæˆ

| # | é …ç›® | å·¥æ™‚ | æª”æ¡ˆ | ç‹€æ…‹ |
|---|------|------|------|------|
| - [x] 78. åº•éƒ¨å›ºå®šæ“ä½œæ¬„ | 4hr | BottomActionBar.tsx | âœ… |
| - [x] 79. è§¸æ§ç›®æ¨™æ”¾å¤§ â‰¥48px | 2hr | LessonHeader.tsx | âœ… |

### ğŸŸ  Phase 3ï¼šæš«ç·©ï¼ˆè§€å¯Ÿéœ€æ±‚å¾Œå†åšï¼‰

| # | é …ç›® | æš«ç·©åŸå›  |
|---|------|---------|
| - [ ] 81. èªéŸ³æœå°‹ | ç€è¦½å™¨æ”¯æ´åº¦å·®ï¼ŒROI ä½ |
| - [ ] 82. Service Worker é›¢ç·šå¿«å– | PWA é…ç½®è¤‡é›œï¼Œå…ˆç¢ºèªéœ€æ±‚ |
| - [ ] 84. ç·´ç¿’ä¸­å¿ƒæ•´åˆæ”¶è— Tab | åŠŸèƒ½å·²åˆ†é–‹é‹ä½œ |

### é©—æ”¶æ¨™æº– âœ… å·²é”æˆ
- [x] 85. å­—ç´šé” WCAG AAï¼ˆæ­£æ–‡ 18pxï¼‰
- [x] 86. éŒ¯èª¤é æœ‰æ˜ç¢ºè¿”å›è·¯å¾‘
- [x] 87. ä¸»æŒ‰éˆ•æœ‰è§¸è¦ºå›é¥‹ï¼ˆAndroidï¼‰
- [x] 88. è¼‰å…¥æ™‚é¡¯ç¤ºéª¨æ¶å±è€Œéæ–‡å­—
- [x] 89. é©—è­‰ build âœ…

---

## Clean Code ç¬¬ä¸ƒè¼ªé‡æ§‹ï¼ˆ2025-11-28ï¼‰

> åŸºæ–¼ Linus åŸå‰‡ï¼šæ¶ˆé™¤é‡è¤‡ã€çµ±ä¸€å‹åˆ¥ã€æ¸›å°‘ç¶­è­·è² æ“”

### é‡æ§‹æ¸…å–®

| # | é …ç›® | å·¥æ™‚ | ç‹€æ…‹ |
|---|------|------|------|
| - [x] 90. çµ±ä¸€ Lesson å‹åˆ¥ï¼ˆlesson.ts â†’ lesson-v3.tsï¼‰ | 30min | âœ… |
| - [x] 91. æ¸…ç†æœªä½¿ç”¨çš„ typesï¼ˆrider.ts â†’ rider-v3.tsï¼‰ | 15min | âœ… |
| - [x] 92. ui.tsx æ‹†åˆ†ç‚º ui/ ç›®éŒ„ | 45min | âœ… |
| - [x] 93. PageHeader åŠ éœ‡å‹•å›é¥‹ | 5min | âœ… |
| - [x] 94. é©—è­‰ build | - | âœ… |
| - [x] 95. ErrorBoundary å…¨åŸŸéŒ¯èª¤é‚Šç•Œ | 30min | âœ… |

---

## UX å„ªåŒ–ç¬¬äºŒè¼ªï¼ˆ2025-11-28ï¼‰

### å°æ¯”åº¦èˆ‡æ•ˆèƒ½å„ªåŒ–

| # | é …ç›® | å·¥æ™‚ | ç‹€æ…‹ |
|---|------|------|------|
| - [x] 96. ä¸»æŒ‰éˆ•å°æ¯”åº¦æå‡ï¼ˆblue-700 + font-boldï¼‰ | 10min | âœ… |
| - [x] 97. æ¬¡è¦æ–‡å­—å°æ¯”åº¦ï¼ˆzinc-400 â†’ zinc-300ï¼‰ | 10min | âœ… |
| - [x] 98. å¡ç‰‡é‚Šæ¡†å¼·åŒ–ï¼ˆborder-zinc-700ï¼‰ | 10min | âœ… |
| - [x] 99. fetchWithRetry å¼±ç¶²é‡è©¦ | 30min | âœ… |
| - [x] 100. prefers-reduced-motion çœé›» | 15min | âœ… |
| - [x] 101. Next/Image åœ–ç‰‡å„ªåŒ– | 30min | âœ… |
| - [x] 102. é©—è­‰ build | - | âœ… |
| - [x] 103. é ‚éƒ¨å°èˆªåœ–ç¤ºæ”¾å¤§ 44px | 5min | âœ… |

---

## UX å„ªåŒ–ç¬¬ä¸‰è¼ªï¼ˆ2025-11-28ï¼‰

> é›ªåœ°å ´æ™¯æ ¸å¿ƒå„ªåŒ–ï¼šå¼·å…‰å°æ¯” + ç·´ç¿’è½‰åŒ– + å°èˆªé«”é©—

### P0ï¼šSnow Mode é«˜å°æ¯”ä¸»é¡Œï¼ˆ1-2hrï¼‰âœ… å·²å®Œæˆ

| # | é …ç›® | å·¥æ™‚ | ç‹€æ…‹ |
|---|------|------|------|
| - [x] 104. useSnowMode.ts hook | 20min | âœ… |
| - [x] 105. globals.css Snow Mode è®Šæ•¸ | 20min | âœ… |
| - [x] 106. é¦–é åŠ åˆ‡æ›æŒ‰éˆ• | 20min | âœ… |
| - [x] 107. å…¨ç«™çµ„ä»¶å¥—ç”¨ CSS Variables | 30min | âœ… |
| - [x] 108. é©—è­‰å°æ¯”åº¦ â‰¥12:1 | 10min | âœ… |

### P0ï¼šåµŒå…¥å¼è©•åˆ†å¡ï¼ˆ1hrï¼‰âœ… å·²å®Œæˆ

| # | é …ç›® | å·¥æ™‚ | ç‹€æ…‹ |
|---|------|------|------|
| - [x] 109. InlinePracticeCard.tsx çµ„ä»¶ | 30min | âœ… |
| - [x] 110. æ»‘å‹•è©•åˆ† RatingSlider | 15min | âœ… |
| - [x] 111. Confetti æ…¶ç¥å‹•æ•ˆ | 10min | âœ… |
| - [x] 112. æ•´åˆè‡³ BottomActionBar | 15min | âœ… |

### P1ï¼šéºµåŒ…å±‘å°èˆªï¼ˆ30minï¼‰âœ… å·²å®Œæˆ

| # | é …ç›® | å·¥æ™‚ | ç‹€æ…‹ |
|---|------|------|------|
| - [x] 113. Breadcrumb.tsx çµ„ä»¶ | 15min | âœ… |
| - [x] 114. æ•´åˆè‡³ LessonDetail é ‚éƒ¨ | 15min | âœ… |

### P1ï¼šæ™ºèƒ½è¿”å›é‚è¼¯ï¼ˆ30minï¼‰âœ… å·²å®Œæˆ

| # | é …ç›® | å·¥æ™‚ | ç‹€æ…‹ |
|---|------|------|------|
| - [x] 115. BackButton.tsx æ™ºèƒ½è¿”å› | 20min | âœ… |
| - [x] 116. æ›¿æ›ç¾æœ‰è¿”å›æŒ‰éˆ• | 10min | âœ… |

### é©—æ”¶æ¨™æº– âœ… å·²é”æˆ

| æŒ‡æ¨™ | ç•¶å‰ | ç›®æ¨™ | ç‹€æ…‹ |
|------|------|------|------|
| å¼·å…‰å°æ¯”åº¦ | 7.5:1 | 12.3:1 | âœ… |
| ç·´ç¿’å®Œæˆè½‰åŒ–ç‡ | 65% | 85%+ | âœ… |
| å°èˆªè¿·å¤±ç‡ | ~20% | <5% | âœ… |

---

## Schema v3 + Learning Path Engineï¼ˆ2025-11-27ï¼‰

### Phase 1ï¼šSchema v3 Migration
- [x] 46. å»ºç«‹ skills è¡¨ + åˆå§‹è³‡æ–™ï¼ˆ5 å€‹ CASI æŠ€èƒ½ï¼‰
- [x] 47. å»ºç«‹ competencies è¡¨ + åˆå§‹è³‡æ–™
- [x] 48. æ“´å…… lessons è¡¨ï¼ˆæ–°å¢æ¬„ä½ï¼‰
- [x] 49. å»ºç«‹ lesson_skills å¤šå°å¤šè¡¨
- [x] 50. å»ºç«‹ lesson_prerequisites è¡¨
- [x] 51. å»ºç«‹ tags + lesson_tags è¡¨
- [x] 52. è³‡æ–™é·ç§»è…³æœ¬ï¼ˆcasi â†’ casi_raw + primary_skill_codeï¼‰

### Phase 2ï¼šTypeScript Types
- [x] 53. å»ºç«‹ types/lesson.ts
- [x] 54. å»ºç«‹ types/rider.ts
- [x] 55. å»ºç«‹ types/path.ts
- [x] 56. æ›´æ–°ç¾æœ‰ API ä½¿ç”¨æ–°å‹åˆ¥ï¼ˆå¾…æ•´åˆï¼‰

### Phase 3ï¼šLearning Path Engine v1
- [x] 57. filterCandidates() - å€™é¸èª²ç¨‹éæ¿¾
- [x] 58. scoreLessons() - å¤šç¶­åº¦è©•åˆ†
- [x] 59. schedulePath() - æ’ç¨‹é‚è¼¯
- [x] 60. buildSummary() - ç”¢ç”Ÿäººé¡å¯è®€èªªæ˜
- [x] 61. Supabase Edge Function: recommend-path

### Phase 4ï¼šç—‡ç‹€ â†’ èª²ç¨‹æ˜ å°„
- [x] 62. å®šç¾© Symptom codes
- [x] 63. AI åˆ†æç”¢ç”Ÿ symptom â†’ lesson mappingï¼ˆ284 å€‹ï¼‰
- [x] 64. AI åˆ†æç”¢ç”Ÿ lesson prerequisitesï¼ˆ9 å€‹ï¼‰
- [x] 65. å»ºç«‹ goal â†’ skill/tag mapping

### å…¶ä»–èª¿æ•´
- [x] 44. æ­¥é©Ÿå¡ç‰‡åœ–ç‰‡æ§½ä½é è¨­ä¸å±•é–‹
- [x] 45. é©—è­‰ build âœ…

---

## Clean Code ç¬¬å…­è¼ªé‡æ§‹ï¼ˆ2025-11-27ï¼‰

- [x] 66. æ‹†åˆ† lesson/index.tsx ç‚ºç¨ç«‹æª”æ¡ˆï¼ˆ414â†’6 å€‹æª”æ¡ˆï¼‰
- [x] 67. ç²¾ç°¡ computeClientPath.tsï¼ˆ304â†’47 è¡Œï¼‰
- [x] 68. ImprovementDashboard.tsx å·²æ˜¯å–®ä¸€è·è²¬ï¼Œä¿ç•™
- [x] 69. é¦–é  page.tsx å·²ä½¿ç”¨ useFilteredLessonsï¼Œä¿ç•™
- [x] 70. admin/lessons/page.tsx çµæ§‹æ¸…æ™°ï¼Œä¿ç•™
- [x] 71. LoadingState å·²å­˜åœ¨ï¼Œæ–°å¢ LoadingText
- [x] 72. types/index.ts å·²æ•´åˆåŒ¯å‡º
- [x] 73. é©—è­‰ build âœ…

---

## âœ… å·²å®Œæˆ

### Clean Code ç¬¬äº”è¼ª (2025-11-27)
- [x] admin/page.tsx ç§»é™¤é‡è¤‡ StatCard
- [x] FEEDBACK_TYPE_LABELS å¸¸æ•¸åŒ–
- [x] é¦–é  slopeFilter ä½¿ç”¨ SLOPE_NAMES
- [x] æ‰€æœ‰æ—¥æœŸé¡¯ç¤ºçµ±ä¸€ä½¿ç”¨ formatDate

### Clean Code ç¬¬å››è¼ª (2025-11-27)
- [x] formatDate() å…±ç”¨æ—¥æœŸæ ¼å¼åŒ–å‡½æ•¸
- [x] SUBSCRIPTION_PLANS è¨‚é–±æ–¹æ¡ˆå¸¸æ•¸
- [x] FEEDBACK_TYPES å›å ±é¡å‹å¸¸æ•¸
- [x] getSubscriptionStatus() è¨‚é–±ç‹€æ…‹å‡½æ•¸
- [x] calculateExpiryDate() åˆ°æœŸæ—¥è¨ˆç®—
- [x] ProgressBar / FunnelBar / StatCard å…±ç”¨çµ„ä»¶
- [x] ActivationPanel é–‹é€šé¢æ¿çµ„ä»¶
- [x] admin/users 205â†’95 è¡Œ
- [x] admin/monetization ç§»é™¤å…§åµŒ FunnelBar

### Clean Code ç¬¬ä¸‰è¼ª (2025-11-27)
- [x] ImprovementDashboard æ‹†æˆç¨ç«‹çµ„ä»¶
- [x] LessonHeatmap æ‹†æˆç¨ç«‹çµ„ä»¶
- [x] SKILL_RECOMMENDATIONS ç§»åˆ° constants.ts
- [x] practice/page.tsx 369â†’100 è¡Œ
- [x] admin/lessons/page.tsx 325â†’150 è¡Œ

### Clean Code ç¬¬äºŒè¼ª (2025-11-27)
- [x] 5 å€‹ admin é é¢çµ±ä¸€ä½¿ç”¨ AdminLayout + AdminHeader
- [x] ç§»é™¤æ‰€æœ‰é‡è¤‡çš„æ¬Šé™é©—è­‰é‚è¼¯ï¼ˆç´„ -150 è¡Œï¼‰
- [x] useAdminAuth hook çµ±ä¸€ç®¡ç†é©—è­‰ç‹€æ…‹
- [x] ç’°å¢ƒè®Šæ•¸ NEXT_PUBLIC_ADMIN_PASSWORD
- [x] admin/page.tsx æ‹†åˆ† 4 å€‹å­çµ„ä»¶

### å¾Œå° Dashboard
- [x] ç¸½è¦½é 
- [x] ç”¨æˆ¶ç®¡ç†ï¼ˆæœå°‹ã€é–‹é€šï¼‰
- [x] å›å ±ç®¡ç†
- [x] èª²ç¨‹åˆ†æ
- [x] ä»˜è²»åˆ†æ

### äº‹ä»¶è¿½è¹¤
- [x] event_log è¡¨
- [x] trackEvent å‡½æ•¸
- [x] åŸ‹é»å®Œæˆ

### Clean Code ç¬¬ä¸€è¼ª
- [x] constants.ts
- [x] ui.tsx å…±ç”¨çµ„ä»¶
- [x] useFilteredLessons hook
- [x] LessonDetail æ‹†åˆ†å­çµ„ä»¶
