# ğŸ’³ æ”¯ä»˜ç³»çµ±å®Œæ•´æ¸¬è©¦æŒ‡å—

## âš¡ å¿«é€Ÿé–‹å§‹ (5 åˆ†é˜)

å¦‚æœä½ åªæœ‰ 5 åˆ†é˜ï¼ŒæŒ‰é€™å€‹é †åºæ¸¬è©¦ï¼š

```
1ï¸âƒ£ æ‰“é–‹ https://sb-qa-web.zeabur.app
2ï¸âƒ£ ç™»å…¥ user_free@test.com / Test@123456
3ï¸âƒ£ é€² /pricing
4ï¸âƒ£ é»ã€Œ7å¤©PASSã€çš„ã€Œè³¼è²·ã€æŒ‰éˆ•
5ï¸âƒ£ æ‡‰è‡ªå‹•å°å‘ /mock-checkout
6ï¸âƒ£ é»ã€Œæ¨¡æ“¬ä»˜æ¬¾æˆåŠŸã€
7ï¸âƒ£ æ‡‰å°å‘ /payment-successï¼ˆæˆåŠŸ âœ…ï¼‰
8ï¸âƒ£ é‡æ–°æ•´ç†é¦–é ï¼Œçœ‹è¨‚é–±ç‹€æ…‹æ˜¯å¦æ›´æ–°

â±ï¸ æ•´å€‹æµç¨‹ < 2 åˆ†é˜
âœ… å¦‚æœå…¨éƒ¨é€šéï¼ŒåŸºæœ¬åŠŸèƒ½æ²’å•é¡Œ
```

---

## ğŸš€ å‰ç½®æº–å‚™

### ç’°å¢ƒé…ç½®
```
æ¸¬è©¦ç¶²å€: https://sb-qa-web.zeabur.app
ç’°å¢ƒè®Šæ•¸å·²è¨­ç½®:
- PAYMENT_PROVIDER=oentech
- PAYMENT_OENTECH_API_URL=https://payment-api.testing.oen.tw
- NEXT_PUBLIC_APP_URL=https://sb-qa-web.zeabur.app
Webhook URL: https://sb-qa-web.zeabur.app/api/payments/webhook
```

### å·¥å…·æº–å‚™
- âœ… ç€è¦½å™¨é–‹ç™¼è€…å·¥å…· (F12) - ç”¨æ–¼æª¢æŸ¥ Network å’Œ Console
- âœ… Supabase ç™»å…¥å¸³è™Ÿ - ç”¨æ–¼ SQL æŸ¥è©¢é©—è­‰äº¤æ˜“æ•¸æ“š
- âœ… è¨˜äº‹æœ¬ - è¨˜éŒ„ payment_id å’Œ provider_payment_id

### æ¸¬è©¦å‰æª¢æŸ¥æ¸…å–®
- [ ] èƒ½è¨ªå• https://sb-qa-web.zeabur.app
- [ ] é–‹å•Ÿ DevTools (F12)ï¼ŒConsole æ¨™ç±¤æ²’æœ‰ Mixed Content æˆ–å¤§ç´…è‰²éŒ¯èª¤
- [ ] ä¸‰å€‹æ¸¬è©¦å¸³è™Ÿéƒ½èƒ½æˆåŠŸç™»å…¥ä¸¦ç™»å‡º

---

## ğŸ“Š æ¸¬è©¦å¸³è™Ÿ

| å¸³è™Ÿ | å¯†ç¢¼ | è¨‚é–±ç‹€æ…‹ | ç”¨é€” |
|------|------|--------|------|
| `user_free@test.com` | `Test@123456` | ç„¡è¨‚é–± | é¦–æ¬¡è³¼è²· |
| `user_pro@test.com` | `Test@123456` | pro_yearly (æœ‰æ•ˆï¼Œè‡³ 2026-12-01) | å·²æœ‰è¨‚é–±ï¼ˆæ‡‰è¢«æ“‹ï¼‰ |
| `user_expired@test.com` | `Test@123456` | pass_7 (å·²éæœŸï¼Œæ–¼ 2025-12-03) | çºŒè¨‚æ¸¬è©¦ |

---

## ğŸ§ª ä¸‰ç¨®æ–¹æ¡ˆæ¸¬è©¦

### æ–¹æ¡ˆ 1ï¸âƒ£ï¼šMock Checkoutï¼ˆæœ¬åœ°æ¸¬è©¦ï¼‰

**ç›®çš„**ï¼šé©—è­‰é‡‘æµç³»çµ±çš„åŸºæœ¬æµç¨‹ï¼ˆAPI â†’ æ”¯ä»˜é é¢ â†’ Webhook â†’ è¨‚é–±æ›´æ–°ï¼‰

#### ğŸ“‹ è©³ç´°æ­¥é©Ÿ

**Step 1: ç™»å…¥**
```
1. æ‰“é–‹ https://sb-qa-web.zeabur.app
2. é»å³ä¸Šæ–¹ã€Œç™»å…¥ã€
3. Email: user_free@test.com
4. å¯†ç¢¼: Test@123456
5. âœ… ç¢ºèªç™»å…¥æˆåŠŸï¼Œçœ‹åˆ° Email é¡¯ç¤ºåœ¨é é¢
```

**Step 2: é€²å…¥ Pricing é é¢**
```
1. é»å°èˆªæ¬„ã€Œæ–¹æ¡ˆèˆ‡åƒ¹æ ¼ã€æˆ–é€² /pricing
2. âœ… çœ‹åˆ°ä¸‰å€‹æ–¹æ¡ˆï¼š7å¤© PASS ($180)ã€30å¤© PASS ($290)ã€PROå¹´è²» ($690/å¹´)
3. âœ… è³¼è²·æŒ‰éˆ•æ˜¯è—è‰²ï¼Œå¯é»æ“Šï¼ˆä¸æ‡‰è©²ç¦ç”¨æˆ–ç°åŒ–ï¼‰
```

**Step 3: é»æ“Šã€Œè³¼è²·ã€æŒ‰éˆ•**
```
1. é¸ 7 å¤© PASS ($180)ï¼Œé»ã€Œè³¼è²·ã€æŒ‰éˆ•
2. ğŸ” æ‰“é–‹ DevTools (F12) â†’ Network æ¨™ç±¤
3. âœ… çœ‹åˆ°æŒ‰éˆ•è®Šç¦ç”¨ï¼ˆdisabledï¼‰ä¸”é¡¯ç¤ºã€Œå»ºç«‹ä¸­...ã€
4. ğŸ” Network ä¸­çœ‹åˆ° POST /api/payments/checkout è«‹æ±‚
   - Status: 200 OK
   - Response: {"checkoutUrl":"...", ...}
```

**Step 4: è‡ªå‹•å°å‘åˆ° Mock Checkout**
```
1. â³ ç­‰å¾… 1-2 ç§’ï¼Œè‡ªå‹•å°å‘ /mock-checkout é é¢
2. âœ… çœ‹åˆ°ã€ŒMock Checkoutã€æ¨™é¡Œ
3. âœ… çœ‹åˆ° Payment IDï¼ˆè¨˜ä¸‹ä¾†ï¼Œå¦‚ abc123...ï¼‰
4. âœ… çœ‹åˆ° Plan: pass_7
5. âœ… æœ‰ã€Œæ¨¡æ“¬ä»˜æ¬¾æˆåŠŸã€æŒ‰éˆ•ï¼ˆè—è‰²ï¼‰
```

**Step 5: æ¨¡æ“¬æ”¯ä»˜æˆåŠŸ**
```
1. é»ã€Œæ¨¡æ“¬ä»˜æ¬¾æˆåŠŸã€æŒ‰éˆ•
2. ğŸ” Network ä¸­çœ‹åˆ° POST /api/payments/webhook è«‹æ±‚
   - Status: 200 OK
   - Response: {"ok":true}
3. â³ ç­‰å¾… 1-2 ç§’ï¼Œè‡ªå‹•å°å‘ /payment-success
```

**Step 6: é©—è­‰æ”¯ä»˜æˆåŠŸé é¢**
```
1. âœ… çœ‹åˆ°ã€Œæ”¯ä»˜æˆåŠŸã€é é¢
2. âœ… çœ‹åˆ°è¨‚é–±ä¿¡æ¯ï¼ˆã€Œä½ å·²æˆåŠŸè³¼è²· 7 å¤©èª²ç¨‹é€šè¡Œè­‰ã€æˆ–é¡ä¼¼ï¼‰
3. âœ… çœ‹åˆ° 3 ç§’å¾Œè‡ªå‹•é‡å°åˆ°é¦–é æˆ–æ‰‹å‹•é»ã€Œè¿”å›é¦–é ã€
```

**Step 7: é©—è­‰å‰ç«¯è¨‚é–±ç‹€æ…‹**
```
1. é‡æ–°ç™»å…¥æˆ–é‡æ–°æ•´ç†é¦–é 
2. âœ… çœ‹åˆ°è¨‚é–±ç‹€æ…‹å·²æ›´æ–°ï¼ˆä¸å†é¡¯ç¤ºã€Œå‡ç´šã€æç¤ºï¼‰
3. âœ… å¯èƒ½çœ‹åˆ°ã€Œç·´ç¿’ç´€éŒ„ã€ç­‰ä»˜è²»åŠŸèƒ½å·²è§£é–
```

#### âœ… é æœŸçµæœæª¢æŸ¥æ¸…å–®

| æª¢æŸ¥é … | é æœŸ | å¯¦éš› | å‚™è¨» |
|--------|------|------|------|
| 1. èƒ½é»æ“Šè³¼è²·æŒ‰éˆ• | âœ… æŒ‰éˆ•å¯é» | | |
| 2. é¡¯ç¤ºå»ºç«‹ä¸­ç‹€æ…‹ | âœ… æŒ‰éˆ•ç¦ç”¨ + æ–‡æ¡ˆã€Œå»ºç«‹ä¸­...ã€ | | |
| 3. å°å‘ Mock Checkout | âœ… URL è®Š /mock-checkout | | |
| 4. é é¢é¡¯ç¤º payment_id | âœ… æœ‰ UUID | | |
| 5. é»ã€Œæ¨¡æ“¬æˆåŠŸã€å¾Œå°å‘ | âœ… è‡ªå‹•åˆ° /payment-success | | |
| 6. é¡¯ç¤ºæˆåŠŸæ¶ˆæ¯ | âœ… ã€Œæ”¯ä»˜æˆåŠŸã€æ¶ˆæ¯ | | |
| 7. è¨‚é–±å·²æ›´æ–° | âœ… é¦–é ä¸å†é¡¯ç¤ºå‡ç´šæç¤º | | |

#### ğŸ” æ•¸æ“šåº«é©—è­‰

åœ¨ Supabase SQL Editor ä¸­åŸ·è¡Œä»¥ä¸‹æŸ¥è©¢é©—è­‰æ•¸æ“šæ˜¯å¦æ­£ç¢ºæ›´æ–°ã€‚

**æŸ¥è©¢ 1: æª¢æŸ¥ payments è¡¨è¨˜éŒ„**
```sql
SELECT
  id,
  user_id,
  plan_id,
  status,
  provider,
  amount,
  created_at
FROM public.payments
WHERE user_id = (SELECT id FROM public.users WHERE email = 'user_free@test.com')
ORDER BY created_at DESC
LIMIT 1;
```

âœ… é æœŸçµæœï¼š
- `status` = `'active'`ï¼ˆæ”¯ä»˜æˆåŠŸï¼‰
- `provider` = `'mock'`ï¼ˆMock æä¾›å•†ï¼‰
- `plan_id` = `'pass_7'`ï¼ˆ7å¤©æ–¹æ¡ˆï¼‰
- `amount` = `18000`ï¼ˆ180 å…ƒï¼Œå–®ä½ç‚ºåˆ†æˆ–æœ€å°å–®ä½ï¼‰

**æŸ¥è©¢ 2: æª¢æŸ¥ users è¡¨è¨‚é–±ç‹€æ…‹**
```sql
SELECT
  subscription_type,
  subscription_expires_at,
  payment_status,
  last_payment_provider
FROM public.users
WHERE email = 'user_free@test.com';
```

âœ… é æœŸçµæœï¼š
- `subscription_type` = `'pass_7'`ï¼ˆæ–¹æ¡ˆé¡å‹å·²æ›´æ–°ï¼‰
- `subscription_expires_at` > ç¾åœ¨æ™‚é–“ï¼ˆæœ‰æ•ˆæœŸå·²è¨­ç½®ï¼‰
- `payment_status` = `'active'`ï¼ˆæ”¯ä»˜ç‹€æ…‹æ´»èºï¼‰

**æŸ¥è©¢ 3: æª¢æŸ¥äº‹ä»¶æ—¥èªŒ**
```sql
SELECT
  event_type,
  metadata,
  created_at
FROM public.event_log
WHERE user_id = (SELECT id FROM public.users WHERE email = 'user_free@test.com')
  AND event_type LIKE 'purchase_%'
ORDER BY created_at DESC
LIMIT 3;
```

âœ… é æœŸçµæœï¼šæ‡‰è©²çœ‹åˆ°è‡³å°‘ 2 å€‹äº‹ä»¶ï¼š
1. `purchase_initiated` - é»æ“Šè³¼è²·æ™‚è¨˜éŒ„
2. `purchase_success` - webhook è§¸ç™¼æ™‚è¨˜éŒ„

#### ğŸ› å¸¸è¦‹å•é¡Œæ’æŸ¥

| å•é¡Œ | ç¾è±¡ | è§£æ±ºæ–¹æ¡ˆ |
|------|------|--------|
| è³¼è²·æŒ‰éˆ•æ²’åæ‡‰ | é»æ“Šç„¡åæ‡‰ | æª¢æŸ¥ Console æ˜¯å¦æœ‰ JS éŒ¯èª¤ï¼›æª¢æŸ¥å·²ç™»å…¥ |
| æ²’æœ‰å°å‘ mock-checkout | åœç•™åœ¨ pricing | Network ä¸­æª¢æŸ¥ /api/payments/checkout æ˜¯å¦ 200ï¼›æª¢æŸ¥ checkoutUrl è¿”å›å€¼ |
| Mock æŒ‰éˆ•é»æ“Šç„¡åæ‡‰ | é»æ“Šç„¡åæ‡‰ | Network ä¸­æª¢æŸ¥ webhook è«‹æ±‚æ˜¯å¦æˆåŠŸï¼›æª¢æŸ¥ Console éŒ¯èª¤ |
| è¨‚é–±æ²’æœ‰æ›´æ–° | payment è¨˜éŒ„å­˜åœ¨ä½† users æœªæ›´æ–° | æª¢æŸ¥ webhook æ˜¯å¦çœŸçš„è§¸ç™¼ï¼›é‡æ–°æ•´ç†é é¢ï¼›æª¢æŸ¥ event_log |

---

### æ–¹æ¡ˆ 2ï¸âƒ£ï¼šÅŒEN Tech æ¸¬è©¦ç’°å¢ƒï¼ˆçœŸå¯¦é‡‘æµï¼‰

#### A. æˆåŠŸäº¤æ˜“æ¸¬è©¦

**å¸³è™Ÿ**ï¼š`user_free@test.com` / `Test@123456`
**ç›®çš„**ï¼šé©—è­‰çœŸå¯¦ ÅŒEN Tech æ”¯ä»˜æµç¨‹ï¼Œç¢ºä¿ webhook æ­£ç¢ºåŒæ­¥è¨‚é–±

##### ğŸ“‹ è©³ç´°æ­¥é©Ÿ

**Step 1-2: ç™»å…¥ä¸¦é€² Pricing**
```
åŒæ–¹æ¡ˆ 1ï¸âƒ£ Step 1-2
```

**Step 3: é¸æ“‡ PRO å¹´è²»ä¸¦é»è³¼è²·**
```
1. é¸ã€ŒPRO å¹´è²»ã€($690/å¹´) - æœ€é«˜é‡‘é¡æ–¹æ¡ˆ
2. é»è—è‰²ã€Œè³¼è²·ã€æŒ‰éˆ•
3. âœ… æŒ‰éˆ•ç¦ç”¨ï¼Œé¡¯ç¤ºã€Œå»ºç«‹ä¸­...ã€
4. ğŸ” Network ä¸­çœ‹åˆ° POST /api/payments/checkout
```

**Step 4: é€²å…¥ ÅŒEN Tech Checkout**
```
1. â³ ç­‰å¾…å°å‘ï¼ˆ1-2 ç§’ï¼‰
2. âœ… çœ‹åˆ° ÅŒEN Tech çš„æ”¯ä»˜é é¢ï¼ˆè—è‰²/ç¶ è‰²ä¸»é¡Œï¼Œèˆ‡æˆ‘å€‘ä¸åŒï¼‰
3. âœ… çœ‹åˆ°é‡‘é¡ï¼šï¿¥69000ï¼ˆæˆ–ç­‰ç­‰å€¼å¹£åˆ¥ï¼‰
4. âœ… çœ‹åˆ°ã€Œæ”¯ä»˜æ–¹å¼ã€é¸é …å¡ï¼ˆä¿¡ç”¨å¡/è½‰å¸³/å…¶ä»–ï¼‰
```

**Step 5: å¡«å¯«æ¸¬è©¦å¡è³‡è¨Š**
```
é¸æ“‡ã€Œä¿¡ç”¨å¡ã€æ”¯ä»˜æ–¹å¼ï¼š

å¡è™Ÿï¼š          4242 4242 4242 4242
æœ‰æ•ˆæœŸï¼š        12/28ï¼ˆæˆ–ä»»æ„æœªä¾†æœˆä»½ï¼‰
CVVï¼š          123
åæŒå¡äººï¼š      Test User

âš ï¸ æ³¨æ„ï¼šé‡‘é¡å¿…é ˆ > 100ï¼ŒPRO å¹´è²» 69000 æ»¿è¶³æ­¤æ¢ä»¶
```

**Step 6: ç¢ºèªæ”¯ä»˜**
```
1. æª¢æŸ¥é‡‘é¡ç„¡èª¤ï¼ˆï¿¥69000ï¼‰
2. é»ã€Œç«‹å³æ”¯ä»˜ã€æˆ–ã€Œç¢ºèªã€æŒ‰éˆ•
3. â³ ç­‰å¾… 3-5 ç§’ï¼ŒÅŒEN Tech è™•ç†æ”¯ä»˜
4. âœ… çœ‹åˆ°ã€Œæ”¯ä»˜æˆåŠŸã€ç¢ºèªé é¢ï¼ˆåœ¨ ÅŒEN Tech é é¢ä¸Šï¼‰
```

**Step 7: è‡ªå‹•å°å›æ‡‰ç”¨**
```
1. â³ ç­‰å¾…è‡ªå‹•å°å‘ï¼ˆ1-2 ç§’ï¼‰æˆ–çœ‹åˆ°ã€Œè¿”å›å•†æˆ¶ã€æŒ‰éˆ•
2. âœ… è‡ªå‹•å°å‘ https://sb-qa-web.zeabur.app/payment-success
3. âœ… çœ‹åˆ°æˆ‘å€‘çš„ã€Œæ”¯ä»˜æˆåŠŸã€é é¢
4. â³ 3 ç§’å¾Œè‡ªå‹•å°å›é¦–é æˆ–æ‰‹å‹•é»ã€Œè¿”å›é¦–é ã€
```

**Step 8: é©—è­‰è¨‚é–±å·²æ›´æ–°**
```
1. çœ‹åˆ°é¦–é ä¸å†é¡¯ç¤ºã€Œå‡ç´šã€æç¤º
2. âœ… å¯èƒ½çœ‹åˆ° PRO ç”¨æˆ¶ç‰¹æœ‰çš„åŠŸèƒ½ï¼ˆå¦‚èª²ç¨‹æ¨è–¦ã€ç·´ç¿’æ•¸æ“šç­‰ï¼‰
3. å¯é¸ï¼šåˆ·æ–°é é¢æˆ–ç™»å‡ºå†ç™»å…¥ï¼Œç¢ºèªæŒä¹…åŒ–
```

##### âœ… é æœŸçµæœæª¢æŸ¥æ¸…å–®

| æª¢æŸ¥é … | é æœŸ | å¯¦éš› | å‚™è¨» |
|--------|------|------|------|
| 1. å°å‘ ÅŒEN Tech é é¢ | âœ… URL æ˜¯ ÅŒEN Tech åŸŸå | | |
| 2. é¡¯ç¤ºæ­£ç¢ºé‡‘é¡ | âœ… 69000ï¼ˆPROå¹´è²»ï¼‰ | | |
| 3. æ”¯ä»˜æˆåŠŸ | âœ… ÅŒEN Tech é¡¯ç¤ºæˆåŠŸ | | |
| 4. è‡ªå‹•å°å›æ‡‰ç”¨ | âœ… å›åˆ° /payment-success | | |
| 5. é¦–é è¨‚é–±å·²æ›´æ–° | âœ… PRO ç‹€æ…‹é¡¯ç¤º | | |

##### ğŸ” æ•¸æ“šåº«é©—è­‰

**æŸ¥è©¢ 1: æª¢æŸ¥ payments è¡¨ï¼ˆçœŸå¯¦äº¤æ˜“ï¼‰**
```sql
SELECT
  id,
  user_id,
  plan_id,
  status,
  provider,
  provider_payment_id,
  amount,
  raw_payload -> 'success' as oentech_success,
  created_at
FROM public.payments
WHERE user_id = (SELECT id FROM public.users WHERE email = 'user_free@test.com')
  AND provider = 'oentech'
ORDER BY created_at DESC
LIMIT 1;
```

âœ… é æœŸçµæœï¼š
- `status` = `'active'`ï¼ˆæ”¯ä»˜æˆåŠŸï¼‰
- `provider` = `'oentech'`ï¼ˆÅŒEN Tech æä¾›å•†ï¼‰
- `provider_payment_id` â‰  NULLï¼ˆÅŒEN Tech è¿”å›çš„äº¤æ˜“ IDï¼‰
- `amount` = `69000`ï¼ˆPRO å¹´è²»ï¼‰
- `raw_payload` åŒ…å« ÅŒEN Tech çš„å®Œæ•´ webhook è³‡æ–™

**æŸ¥è©¢ 2: æª¢æŸ¥ users è¡¨**
```sql
SELECT
  subscription_type,
  subscription_expires_at,
  payment_status,
  last_payment_provider,
  last_payment_reference
FROM public.users
WHERE email = 'user_free@test.com';
```

âœ… é æœŸçµæœï¼š
- `subscription_type` = `'pro_yearly'`ï¼ˆå·²å‡ç´šç‚ºå¹´è²»ï¼‰
- `subscription_expires_at` â‰ˆ ç•¶å‰æ—¥æœŸ + 365 å¤©
- `payment_status` = `'active'`
- `last_payment_provider` = `'oentech'`

**æŸ¥è©¢ 3: æª¢æŸ¥äº‹ä»¶æ—¥èªŒ**
```sql
SELECT
  event_type,
  metadata ->> 'provider_payment_id' as oentech_id,
  created_at
FROM public.event_log
WHERE user_id = (SELECT id FROM public.users WHERE email = 'user_free@test.com')
  AND event_type = 'purchase_success'
ORDER BY created_at DESC
LIMIT 1;
```

âœ… é æœŸçµæœï¼š
- æ‡‰æœ‰ `purchase_success` äº‹ä»¶
- metadata åŒ…å« ÅŒEN Tech äº¤æ˜“ ID

---

#### B. å¤±æ•—äº¤æ˜“æ¸¬è©¦

**å¸³è™Ÿ**ï¼š`user_expired@test.com` / `Test@123456`
**ç›®çš„**ï¼šé©—è­‰æ”¯ä»˜å¤±æ•—æ™‚çš„éŒ¯èª¤è™•ç†å’Œè¨‚é–±ä¸è¢«èª¤æ›´æ–°

##### ğŸ“‹ è©³ç´°æ­¥é©Ÿ

**Step 1-3: ç™»å…¥ä¸¦é¸æ“‡ 30 å¤© PASS**
```
1. æ‰“é–‹ https://sb-qa-web.zeabur.app
2. ç™»å…¥ user_expired@test.com / Test@123456
   - â„¹ï¸ æ­¤å¸³è™Ÿè¨‚é–±å·²éæœŸï¼ˆpass_7 æ–¼ 2025-12-03 éæœŸï¼‰
   - å¯ä»¥é‡æ–°è³¼è²·æ–°æ–¹æ¡ˆ
3. é€² /pricing
4. é¸ã€Œ30 å¤© PASSã€($290)
5. é»ã€Œè³¼è²·ã€æŒ‰éˆ•
```

**Step 4: é€²å…¥ ÅŒEN Tech Checkout**
```
åŒæ–¹æ¡ˆ 2A Step 4
```

**Step 5: å¡«å¯«å¤±æ•—å¡è™Ÿ**
```
é¸æ“‡ã€Œä¿¡ç”¨å¡ã€æ”¯ä»˜æ–¹å¼ï¼š

å¡è™Ÿï¼š          4012 8888 1888 8333  (âš ï¸ æ­¤å¡è™Ÿæœƒå¤±æ•—)
æœ‰æ•ˆæœŸï¼š        12/28
CVVï¼š          123
åæŒå¡äººï¼š      Test User

âš ï¸ æ³¨æ„ï¼šÅŒEN Tech æœƒåœ¨æ­¤å¡æäº¤æ™‚ä¸»å‹•æ‹’çµ•
```

**Step 6: ç¢ºèªæ”¯ä»˜ï¼ˆæœƒå¤±æ•—ï¼‰**
```
1. æª¢æŸ¥é‡‘é¡ï¼ˆï¿¥29000ï¼‰
2. é»ã€Œç«‹å³æ”¯ä»˜ã€
3. â³ ç­‰å¾… 3-5 ç§’
4. âœ… ÅŒEN Tech è¿”å›ã€Œæ”¯ä»˜å¤±æ•—ã€éŒ¯èª¤
```

**Step 7: è‡ªå‹•å°å‘å¤±æ•—é **
```
1. âœ… è‡ªå‹•å°å‘ https://sb-qa-web.zeabur.app/payment-failure
2. âœ… çœ‹åˆ°ç´…è‰²è­¦å‘Šæ¡†ï¼šã€Œæ”¯ä»˜å¤±æ•—ã€
3. âœ… çœ‹åˆ°å…·é«”å¤±æ•—åŸå› ï¼ˆå¦‚ã€Œå¡è™Ÿè¢«æ‹’ã€ã€ã€Œäº¤æ˜“è¢«æ‹’ã€ç­‰ï¼‰
4. âœ… çœ‹åˆ°ã€Œé‡è©¦ã€æŒ‰éˆ•å’Œã€Œè¿”å›ã€æŒ‰éˆ•
```

**Step 8: é©—è­‰è¨‚é–±æœªè¢«æ›´æ–°**
```
1. é»ã€Œè¿”å›ã€å›åˆ° pricing é é¢
2. âœ… é¦–é ä»é¡¯ç¤ºã€Œå‡ç´šã€æç¤ºï¼ˆè¨‚é–±æœªæ›´æ–°ï¼‰
3. âœ… å¸³è™Ÿä»ç‚ºã€Œå·²éæœŸã€ç‹€æ…‹ï¼Œä¸æ˜¯ã€Œpass_30ã€
```

##### âœ… é æœŸçµæœæª¢æŸ¥æ¸…å–®

| æª¢æŸ¥é … | é æœŸ | å¯¦éš› | å‚™è¨» |
|--------|------|------|------|
| 1. æ”¯ä»˜è¢«æ‹’ | âœ… ÅŒEN Tech è¿”å›å¤±æ•— | | |
| 2. å°å‘å¤±æ•—é  | âœ… URL æ˜¯ /payment-failure | | |
| 3. é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ | âœ… ç´…è‰² alert + å¤±æ•—åŸå›  | | |
| 4. è¨‚é–±æœªæ›´æ–° | âœ… ä»ç‚ºã€Œå·²éæœŸã€ç‹€æ…‹ | | |
| 5. æœ‰é‡è©¦æŒ‰éˆ• | âœ… å¯é»æ“Šã€Œé‡è©¦ã€é‡æ–°æ”¯ä»˜ | | |

##### ğŸ” æ•¸æ“šåº«é©—è­‰

**æŸ¥è©¢ 1: æª¢æŸ¥å¤±æ•—äº¤æ˜“è¨˜éŒ„**
```sql
SELECT
  id,
  user_id,
  plan_id,
  status,
  provider,
  provider_payment_id,
  error_message,
  created_at
FROM public.payments
WHERE user_id = (SELECT id FROM public.users WHERE email = 'user_expired@test.com')
  AND status = 'failed'
ORDER BY created_at DESC
LIMIT 1;
```

âœ… é æœŸçµæœï¼š
- `status` = `'failed'`ï¼ˆæ”¯ä»˜å¤±æ•—ï¼‰
- `error_message` â‰  NULLï¼ˆåŒ…å«å¤±æ•—åŸå› ï¼‰
- `provider` = `'oentech'`

**æŸ¥è©¢ 2: ç¢ºèª users è¡¨è¨‚é–±æœªè¢«æ”¹è®Š**
```sql
SELECT
  subscription_type,
  subscription_expires_at,
  payment_status
FROM public.users
WHERE email = 'user_expired@test.com';
```

âœ… é æœŸçµæœï¼š
- `subscription_type` = `'pass_7'`ï¼ˆä»ç‚ºèˆŠæ–¹æ¡ˆï¼Œæœªè®Šç‚º pass_30ï¼‰
- `subscription_expires_at` < ç¾åœ¨æ™‚é–“ï¼ˆä»ç‚ºå·²éæœŸç‹€æ…‹ï¼‰
- `payment_status` = `'failed'`ï¼ˆæœ€æ–°æ”¯ä»˜å¤±æ•—ï¼‰

**æŸ¥è©¢ 3: æª¢æŸ¥äº‹ä»¶æ—¥èªŒ**
```sql
SELECT
  event_type,
  metadata ->> 'reason' as fail_reason,
  created_at
FROM public.event_log
WHERE user_id = (SELECT id FROM public.users WHERE email = 'user_expired@test.com')
  AND event_type = 'purchase_failed'
ORDER BY created_at DESC
LIMIT 1;
```

âœ… é æœŸçµæœï¼š
- æ‡‰æœ‰ `purchase_failed` äº‹ä»¶
- metadata åŒ…å«å¤±æ•—åŸå› 

---

#### C. 3D é©—è­‰æ¸¬è©¦

**å¸³è™Ÿ**ï¼š`user_free@test.com` / `Test@123456`ï¼ˆéœ€å…ˆå®Œæˆæ–¹æ¡ˆ 2A æˆ–æ–°å¸³è™Ÿï¼‰
**ç›®çš„**ï¼šé©—è­‰æ”¯æŒ 3D é©—è­‰ï¼ˆSecure 3Dï¼‰çš„å¡è™Ÿæµç¨‹

##### ğŸ“‹ è©³ç´°æ­¥é©Ÿ

**Step 1-4: ç™»å…¥ä¸¦é€² ÅŒEN Tech Checkout**
```
åŒæ–¹æ¡ˆ 2A Step 1-4ï¼Œé¸ 7 å¤© PASS ($180)
```

**Step 5: å¡«å¯« 3D é©—è­‰å¡è™Ÿ**
```
å¡è™Ÿï¼š          4000 0000 0000 2503  (Visa 3D)
æœ‰æ•ˆæœŸï¼š        12/28
CVVï¼š          123
```

**Step 6: é€²å…¥ 3D é©—è­‰é é¢**
```
1. é»ã€Œç«‹å³æ”¯ä»˜ã€
2. â³ ç­‰å¾… 3-5 ç§’
3. âœ… è·³è½‰åˆ° 3D Secure é©—è­‰é é¢
4. âœ… çœ‹åˆ° OTP è¼¸å…¥æ¡†æˆ–é©—è­‰æç¤º
5. åœ¨æ¸¬è©¦ç’°å¢ƒä¸­ï¼šè‡ªå‹•é€šéæˆ–æç¤ºè¼¸å…¥ã€Œ000000ã€
```

**Step 7: å®Œæˆé©—è­‰ä¸¦å›åˆ°æˆåŠŸé **
```
1. âœ… é©—è­‰å®Œæˆï¼Œè‡ªå‹•å°å‘ /payment-success
2. âœ… è¨‚é–±æ›´æ–°æˆåŠŸ
```

##### âœ… é æœŸçµæœ
- âœ… èƒ½æ­£ç¢ºé€²å…¥ 3D é©—è­‰æµç¨‹
- âœ… é©—è­‰å®Œæˆå¾ŒæˆåŠŸæ”¯ä»˜
- âœ… è¨‚é–±å·²æ›´æ–°ç‚º pass_7

---

#### D. å·²æœ‰è¨‚é–±ç”¨æˆ¶è¢«æ“‹æ¸¬è©¦

**å¸³è™Ÿ**ï¼š`user_pro@test.com` / `Test@123456`
**ç›®çš„**ï¼šé©—è­‰å·²æœ‰æœ‰æ•ˆè¨‚é–±çš„ç”¨æˆ¶ç„¡æ³•è³¼è²·ï¼Œé˜²æ­¢é‡è¤‡æ‰£æ¬¾

##### ğŸ“‹ è©³ç´°æ­¥é©Ÿ

**Step 1: ç™»å…¥å·²è¨‚é–±å¸³è™Ÿ**
```
1. æ‰“é–‹ https://sb-qa-web.zeabur.app
2. ç™»å…¥ user_pro@test.com / Test@123456
   - â„¹ï¸ æ­¤å¸³è™Ÿæœ‰æœ‰æ•ˆè¨‚é–±ï¼ˆpro_yearlyï¼Œè‡³ 2026-12-01ï¼‰
3. é€² /pricing
```

**Step 2: æª¢æŸ¥è³¼è²·æŒ‰éˆ•ç‹€æ…‹**
```
âœ… æ‡‰çœ‹åˆ°ï¼š
- PRO å¹´è²»æ–¹æ¡ˆçš„ã€Œè³¼è²·ã€æŒ‰éˆ•å·²ç¦ç”¨æˆ–ç°åŒ–
- 7 å¤© PASS å’Œ 30 å¤© PASS æŒ‰éˆ•ä¹Ÿç¦ç”¨
- æˆ–é¡¯ç¤ºã€Œå·²æœ‰æœ‰æ•ˆæ–¹æ¡ˆã€çš„æç¤ºæ–‡æ¡ˆ
```

**Step 3: å˜—è©¦é»æ“Šè³¼è²·æŒ‰éˆ•**
```
1. è©¦è‘—é»æ“Šã€Œè³¼è²·ã€æŒ‰éˆ•
2. âœ… æŒ‰éˆ•ç„¡åæ‡‰ï¼ˆdisabled ç‹€æ…‹ï¼‰
3. ğŸ” Network ä¸­ä¸æ‡‰è©²æœ‰ /api/payments/checkout è«‹æ±‚
   - å¦‚æœæœ‰ï¼Œæª¢æŸ¥æ˜¯å¦è¿”å› 409 Conflict éŒ¯èª¤
```

**Step 4: é©—è­‰éŒ¯èª¤æ¶ˆæ¯**
```
âœ… æ‡‰çœ‹åˆ°æ¶ˆæ¯æç¤ºï¼š
- ã€Œç›®å‰å·²æœ‰æœ‰æ•ˆæ–¹æ¡ˆã€æˆ–
- ã€Œæ‚¨çš„è¨‚é–±è‡³ 2026 å¹´ 12 æœˆ 1 æ—¥ã€æˆ–
- ã€Œè«‹è¯ç¹«æˆ‘å€‘ä»¥å‡ç´šæ–¹æ¡ˆã€
```

##### âœ… é æœŸçµæœæª¢æŸ¥æ¸…å–®

| æª¢æŸ¥é … | é æœŸ | å¯¦éš› | å‚™è¨» |
|--------|------|------|------|
| 1. è³¼è²·æŒ‰éˆ•ç¦ç”¨ | âœ… æŒ‰éˆ•ç°åŒ–/disabled | | |
| 2. é»æ“Šç„¡åæ‡‰ | âœ… æ²’æœ‰ API è«‹æ±‚ | | |
| 3. é¡¯ç¤ºæç¤ºæ–‡æ¡ˆ | âœ… æ˜ç¢ºçš„éŒ¯èª¤æç¤º | | |
| 4. è¨‚é–±æœªè®Š | âœ… ä»ç‚º pro_yearly | | |

##### ğŸ” æ•¸æ“šåº«é©—è­‰

```sql
-- ç¢ºèªå¸³è™Ÿè¨‚é–±ç‹€æ…‹
SELECT
  subscription_type,
  subscription_expires_at,
  payment_status
FROM public.users
WHERE email = 'user_pro@test.com';
```

âœ… é æœŸçµæœï¼š
- `subscription_type` = `'pro_yearly'`ï¼ˆæœ‰æ•ˆè¨‚é–±ï¼‰
- `subscription_expires_at` > ç¾åœ¨æ™‚é–“ï¼ˆæœªéæœŸï¼‰

---

### æ–¹æ¡ˆ 3ï¸âƒ£ï¼šæ”¯ä»˜æˆåŠŸå¾Œçš„ Webhook é©—è­‰

#### ç›®æ¨™
é©—è­‰ ÅŒEN Tech çš„ webhook èƒ½æ­£ç¢ºè§¸ç™¼ã€è§£æã€æ›´æ–°è³‡æ–™åº«

#### å‰ç½®è¨­å®š
éœ€è¦åœ¨ **ÅŒEN Tech CRM å¾Œå°** è¨­å®š webhook endpointï¼š

1. é€² ÅŒEN Tech å¾Œå°ï¼ˆhttps://test.oen.twï¼‰
2. é€²ã€Œç¸½è¨­å®šã€æˆ–ã€ŒWebhook è¨­å®šã€
3. è¨­å®š webhook URLï¼š
   ```
   https://your-domain.com/api/payments/webhook
   ```
4. æˆ–æœ¬åœ°æ¸¬è©¦ç”¨ ngrok è½‰ç™¼ï¼ˆå¦‚é©ç”¨ï¼‰

#### æ¸¬è©¦æµç¨‹

**A. æ‰‹å‹•æ¸¬è©¦**

1. å®ŒæˆçœŸå¯¦æ”¯ä»˜ï¼ˆæ–¹æ¡ˆ 2Aï¼‰
2. åœ¨ ÅŒEN Tech å¾Œå°æ‰¾åˆ°è©²ç­†äº¤æ˜“
3. æª¢æŸ¥æ˜¯å¦å·²é¡¯ç¤ºã€Œå·²è™•ç†ã€ç‹€æ…‹
4. æŸ¥è©¢æ‡‰ç”¨è³‡æ–™åº«ï¼š
   ```sql
   select * from public.payments
   where provider_payment_id = 'ÅŒEN Techå›å‚³çš„ID';
   ```
5. ç¢ºèª status = 'active' ä¸” raw_payload æœ‰å®Œæ•´è³‡æ–™

**B. Webhook é‡è©¦æ¸¬è©¦**ï¼ˆå¦‚ ÅŒEN Tech æ”¯æ´ï¼‰

1. äººç‚ºä¸­æ–·ç¶²è·¯æˆ– API
2. ÅŒEN Tech æ‡‰è‡ªå‹•é‡è©¦ï¼ˆæŒ‰å…¶è¨­å®šï¼š2ç§’ã€4ç§’ã€6ç§’ï¼‰
3. æª¢æŸ¥ payments è¡¨æ˜¯å¦åªæœ‰ä¸€ç­†è¨˜éŒ„ï¼ˆå†ªç­‰æ€§ï¼‰
   ```sql
   select count(*), provider_payment_id
   from public.payments
   where provider_payment_id = 'xxx'
   group by provider_payment_id;
   -- æ‡‰è©² count = 1
   ```

**C. Webhook é©—ç°½æ¸¬è©¦**ï¼ˆå¦‚æœ‰ secret keyï¼‰

- ç›®å‰ä»£ç¢¼æœªå¯¦è£ç°½ç« é©—è­‰ï¼ˆå¯å¾ŒçºŒè£œä¸Šï¼‰
- é©—è­‰ webhook ä¾†æºç¢ºå¯¦æ˜¯ ÅŒEN Tech

---

## ğŸ“‹ æ¸¬è©¦æª¢æŸ¥æ¸…å–®

### å‰ç«¯æª¢æŸ¥
- [ ] Pricing é é¢èƒ½æ­£å¸¸è¼‰å…¥
- [ ] æœªç™»å…¥æ™‚è³¼è²·æŒ‰éˆ•è¢«ç¦ç”¨æˆ–æç¤ºç™»å…¥
- [ ] å·²æœ‰è¨‚é–±æ™‚è³¼è²·æŒ‰éˆ•è¢«ç¦ç”¨æˆ–æç¤º
- [ ] å°å‘ checkout æ™‚é¡¯ç¤ºã€Œè™•ç†ä¸­ã€
- [ ] æ”¯ä»˜æˆåŠŸå°å‘æˆåŠŸé 
- [ ] æ”¯ä»˜å¤±æ•—å°å‘å¤±æ•—é ï¼Œé¡¯ç¤ºéŒ¯èª¤åŸå› 
- [ ] æˆåŠŸ/å¤±æ•—é æœ‰ã€Œè¿”å›ã€å’Œã€Œé‡è©¦ã€æŒ‰éˆ•

### å¾Œç«¯æª¢æŸ¥
- [ ] POST /api/payments/checkout è¿”å›æ­£ç¢ºçš„ checkoutUrl
- [ ] æ‹’çµ•æœªç™»å…¥çš„è«‹æ±‚ï¼ˆ401ï¼‰
- [ ] æ‹’çµ•å·²æœ‰è¨‚é–±çš„ç”¨æˆ¶ï¼ˆ409ï¼‰
- [ ] å»ºç«‹ payments è¨˜éŒ„ï¼ˆstatus = 'pending'ï¼‰
- [ ] è¨˜éŒ„ event_log 'purchase_initiated' äº‹ä»¶

### Webhook æª¢æŸ¥
- [ ] POST /api/payments/webhook èƒ½æ¥æ”¶ ÅŒEN Tech è³‡æ–™
- [ ] æ­£ç¢ºè§£æ ÅŒEN Tech æ ¼å¼
- [ ] æ›´æ–° payments.status ç‚º 'active'
- [ ] æ›´æ–° users.subscription_type å’Œ subscription_expires_at
- [ ] æ›´æ–° users.payment_status ç‚º 'active'
- [ ] è¨˜éŒ„ event_log 'purchase_success' äº‹ä»¶
- [ ] æ”¯ä»˜å¤±æ•—æ™‚ï¼Œè¨‚é–±ä¸è¢«æ›´æ–°

### è³‡æ–™ä¸€è‡´æ€§æª¢æŸ¥
- [ ] payments è¡¨æœ‰å®Œæ•´çš„äº¤æ˜“æ­·å²
- [ ] users.subscription_type èˆ‡ payments çš„æœ€æ–°è¨˜éŒ„å°æ‡‰
- [ ] event_log æœ‰å®Œæ•´çš„äº‹ä»¶åºåˆ—ï¼š
  - purchase_initiated
  - purchase_successï¼ˆæˆ– purchase_failedï¼‰
- [ ] ç„¡å­¤ç«‹çš„ payments è¨˜éŒ„ï¼ˆæ‰¾ä¸åˆ°å°æ‡‰ userï¼‰

---

## ğŸ› æ¸¬è©¦å•é¡Œå›å ±ç¯„æœ¬

### å¦‚ä½•å›å ±å•é¡Œ

**æ ¼å¼ï¼šMarkdown è¡¨æ ¼ + è©³ç´°èªªæ˜**

```markdown
## ğŸ”´ [å•é¡Œæ¨™é¡Œ]

### åŸºæœ¬è³‡è¨Š
| é …ç›® | å€¼ |
|------|-----|
| æ¸¬è©¦æ–¹æ¡ˆ | Mock / ÅŒEN Tech æˆåŠŸ / ÅŒEN Tech å¤±æ•— / 3D é©—è­‰ / å·²è¨‚é–± / Webhook |
| å¸³è™Ÿ | user_xxx@test.com |
| é‡‘é¡ | XXX |
| é æœŸè¡Œç‚º | ... |
| å¯¦éš›è¡Œç‚º | ... |

### éŒ¯èª¤è¨Šæ¯
```
è²¼ä¸Šå®Œæ•´çš„éŒ¯èª¤è¨Šæ¯æˆ–æ§åˆ¶å°è¼¸å‡º
```

### æ­¥é©Ÿé‡ç¾
1. ç™»å…¥ user_xxx@test.com
2. é€² pricing é 
3. ...

### è³‡æ–™åº«ç‹€æ…‹
åŸ·è¡Œä»¥ä¸‹ SQL ä¸¦è²¼å‡ºçµæœï¼š
```sql
select * from public.payments
where user_id = (select id from public.users where email = 'user_xxx@test.com')
order by created_at desc limit 1;
```

### æˆªåœ–
[è²¼ä¸Šå‰ç«¯ç•«é¢æˆªåœ–æˆ– error è¨Šæ¯]

### æ§åˆ¶å°è¼¸å‡º
[è²¼ä¸Š npm run dev çš„çµ‚ç«¯è¼¸å‡º]

### ç’°å¢ƒ
- OS: [macOS/Windows/Linux]
- Browser: [Chrome/Safari/Firefox]
- Node version: [16/18/20]
```

---

## âœ… æ¸¬è©¦å®Œæˆçš„å®šç¾©

âœ“ æ‰€æœ‰ä¸‰ç¨®æ–¹æ¡ˆéƒ½æ¸¬è©¦éäº†
âœ“ æ²’æœ‰æ˜é¡¯çš„å‰ç«¯éŒ¯èª¤
âœ“ è³‡æ–™åº«è¨˜éŒ„å®Œæ•´ä¸”æ­£ç¢º
âœ“ Webhook èƒ½æ­£ç¢ºæ›´æ–°è¨‚é–±
âœ“ æ‰€æœ‰æª¢æŸ¥æ¸…å–®é …ç›®éƒ½é€šé

---

## ğŸš€ æ¸¬è©¦æµç¨‹å»ºè­°

### ç¬¬ 1 è¼ªï¼ˆ15 åˆ†é˜ï¼‰- Mock æ¸¬è©¦
- [ ] Mock checkout å®Œæ•´æµç¨‹
- [ ] æª¢æŸ¥è³‡æ–™åº«è¨˜éŒ„

### ç¬¬ 2 è¼ªï¼ˆ20 åˆ†é˜ï¼‰- ÅŒEN Tech åŸºç¤æ¸¬è©¦
- [ ] æˆåŠŸäº¤æ˜“ï¼ˆå¡è™Ÿ 4242...ï¼‰
- [ ] æª¢æŸ¥è¨‚é–±æ›´æ–°
- [ ] å·²è¨‚é–±ç”¨æˆ¶è¢«æ“‹

### ç¬¬ 3 è¼ªï¼ˆ15 åˆ†é˜ï¼‰- ÅŒEN Tech é€²éšæ¸¬è©¦
- [ ] å¤±æ•—äº¤æ˜“ï¼ˆå¡è™Ÿ 4012...ï¼‰
- [ ] 3D é©—è­‰ï¼ˆå¡è™Ÿ 4000... æˆ– 5200...ï¼‰
- [ ] Webhook é©—è­‰

### ç¬¬ 4 è¼ªï¼ˆ10 åˆ†é˜ï¼‰- å®Œæ•´æ€§æª¢æŸ¥
- [ ] åŸ·è¡Œæ‰€æœ‰æª¢æŸ¥æ¸…å–®
- [ ] é©—è­‰è³‡æ–™ä¸€è‡´æ€§

---

## ğŸ“ æœ‰å•é¡Œæ™‚

é‡åˆ°å•é¡Œè«‹ç”¨ä¸Šé¢çš„ã€Œå›å ±ç¯„æœ¬ã€å›å ±ï¼ŒåŒ…å«ï¼š
1. ä½ åœ¨åšä»€éº¼
2. æœŸæœ›ä»€éº¼
3. å¯¦éš›ç™¼ç”Ÿä»€éº¼
4. éŒ¯èª¤è¨Šæ¯ / æˆªåœ– / Network æˆªåœ–
5. SQL æŸ¥è©¢çµæœ

---

## ğŸ“Š æ¸¬è©¦é€²åº¦è·Ÿè¸ªè¡¨

è¤‡è£½ä¸‹è¡¨ï¼Œåœ¨æ¯å€‹æ¸¬è©¦é …å®Œæˆå¾Œå¡«å¯«ã€Œå¯¦éš›ã€æ¬„ã€‚

### Mock Checkout æ¸¬è©¦

| æª¢æŸ¥é … | é æœŸ | å¯¦éš› | å‚™è¨» |
|--------|------|------|------|
| 1. ç™»å…¥æˆåŠŸ | âœ… | | |
| 2. çœ‹åˆ°è³¼è²·æŒ‰éˆ• | âœ… è—è‰²ã€å¯é» | | |
| 3. é»è³¼è²·å¾Œç¦ç”¨ | âœ… disabled + ã€Œå»ºç«‹ä¸­...ã€ | | |
| 4. å°å‘ mock-checkout | âœ… | | |
| 5. é»ã€Œæ¨¡æ“¬æˆåŠŸã€ | âœ… | | |
| 6. å°å‘ payment-success | âœ… | | |
| 7. è¨‚é–±å·²æ›´æ–° | âœ… é¦–é ç„¡ã€Œå‡ç´šã€ | | |
| **DB é©—è­‰** | | | |
| payments.status | active | | |
| users.subscription_type | pass_7 | | |
| event_log | purchase_success | | |

### ÅŒEN Tech æˆåŠŸäº¤æ˜“

| æª¢æŸ¥é … | é æœŸ | å¯¦éš› | å‚™è¨» |
|--------|------|------|------|
| 1. å°å‘ ÅŒEN Tech | âœ… | | |
| 2. çœ‹åˆ°æ­£ç¢ºé‡‘é¡ | âœ… 69000 | | |
| 3. æ”¯ä»˜æˆåŠŸ | âœ… | | |
| 4. å°å‘ payment-success | âœ… | | |
| 5. è¨‚é–±å·²æ›´æ–° | âœ… pro_yearly | | |
| **DB é©—è­‰** | | | |
| payments.provider | oentech | | |
| payments.provider_payment_id | â‰  NULL | | |
| users.subscription_type | pro_yearly | | |

### ÅŒEN Tech å¤±æ•—äº¤æ˜“

| æª¢æŸ¥é … | é æœŸ | å¯¦éš› | å‚™è¨» |
|--------|------|------|------|
| 1. é€²å…¥ ÅŒEN Tech | âœ… | | |
| 2. æ”¯ä»˜è¢«æ‹’ | âœ… | | |
| 3. å°å‘ payment-failure | âœ… | | |
| 4. é¡¯ç¤ºéŒ¯èª¤åŸå›  | âœ… | | |
| 5. è¨‚é–±æœªæ›´æ–° | âœ… ä»ç‚ºèˆŠç‹€æ…‹ | | |
| **DB é©—è­‰** | | | |
| payments.status | failed | | |
| error_message | â‰  NULL | | |
| users æœªè®Š | âœ… | | |

### é‚Šç•Œæƒ…æ³

| æª¢æŸ¥é … | é æœŸ | å¯¦éš› | å‚™è¨» |
|--------|------|------|------|
| å·²è¨‚é–±ç”¨æˆ¶è³¼è²·æŒ‰éˆ• | disabled | | |
| å·²è¨‚é–±ç”¨æˆ¶é»æ“Šç„¡åæ‡‰ | âœ… ç„¡ API è«‹æ±‚ | | |
| 3D é©—è­‰æµç¨‹ | âœ… é€²å…¥é©—è­‰é  | | |
| 3D é©—è­‰å®Œæˆå¾Œæ”¯ä»˜æˆåŠŸ | âœ… | | |

### ç¸½é«”è©•åˆ†

| é …ç›® | è©•åˆ† | å‚™è¨» |
|------|------|------|
| å‰ç«¯ UX | / 10 | è³¼è²·æŒ‰éˆ•æ¸…æ™°åº¦ã€åé¥‹ç­‰ |
| æ”¯ä»˜æµç¨‹ | / 10 | å°å‘ã€é€Ÿåº¦ã€æˆåŠŸç‡ |
| éŒ¯èª¤æç¤º | / 10 | å¤±æ•—æ™‚æ˜¯å¦æ¸…æ¥š |
| æ•¸æ“šä¸€è‡´æ€§ | / 10 | è¨‚é–±æ˜¯å¦æ­£ç¢ºæ›´æ–° |
| **å¹³å‡åˆ†** | **/ 10** | |

---

## ğŸ‰ æ¸¬è©¦å®Œæˆæ¨™èªŒ

å…¨éƒ¨æ¸¬è©¦å®Œæˆå¾Œï¼Œæ‡‰è©²çœ‹åˆ°ï¼š

```
âœ… Mock checkout èƒ½æ­£å¸¸å®Œæˆ
âœ… ÅŒEN Tech çœŸå¯¦äº¤æ˜“æˆåŠŸ
âœ… æ”¯ä»˜å¤±æ•—æ™‚æ­£ç¢ºæç¤º
âœ… å·²è¨‚é–±ç”¨æˆ¶è¢«æ­£ç¢ºæ“‹ä½
âœ… è³‡æ–™åº«æ•¸æ“šä¸€è‡´
âœ… æ²’æœ‰ console éŒ¯èª¤
âœ… æ‰€æœ‰é é¢åŠ è¼‰å¿«é€Ÿ
```

å¦‚æœå…¨éƒ¨æª¢æŸ¥é€šé = **æº–å‚™ä¸Šç·š**ï¼ğŸš€
